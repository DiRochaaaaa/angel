<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#006eff">
    <meta name="description" content="Descubre el nombre de tu Ángel de la Guarda personalizado y recibe tu mensaje espiritual gratuito. Lectura angelical auténtica basada en tu fecha de nacimiento.">
    <!-- Otimizações de performance -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//www.facebook.com">
    <link rel="dns-prefetch" href="//connect.facebook.net">
    <title>Angel Oasis - Descubre Tu Ángel de la Guarda</title>
    <link rel="icon" href="https://angeloasis.com/wp-content/uploads/2019/07/cropped-Angel-Oasis-wing-32x32.png" sizes="32x32">
    
    <!-- VTurb -->
    <script>!function(i,n){i._plt=i._plt||(n&&n.timeOrigin?n.timeOrigin+n.now():Date.now())}(window,performance);</script>
    <link rel="preload" href="https://scripts.converteai.net/28d41dbd-cd23-4eac-a930-66e1aca584eb/players/68bcdb7af27eb4c9e8d2c0b8/v4/player.js" as="script">
    <link rel="preload" href="https://scripts.converteai.net/lib/js/smartplayer-wc/v4/smartplayer.js" as="script">
    <link rel="preload" href="https://cdn.converteai.net/28d41dbd-cd23-4eac-a930-66e1aca584eb/68bcdae7575dfb94b012cf28/main.m3u8" as="fetch">
    <link rel="dns-prefetch" href="https://cdn.converteai.net">
    <link rel="dns-prefetch" href="https://scripts.converteai.net">
    <link rel="dns-prefetch" href="https://images.converteai.net">
    <link rel="dns-prefetch" href="https://api.vturb.com.br">

    <!-- CSS Crítico Inline para evitar render blocking -->
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Poppins',Arial,sans-serif;background-image:url('assets/images/background-image.webp');background-size:cover;background-position:center;background-repeat:no-repeat;background-attachment:fixed;min-height:100vh;color:#333;font-display:swap;background-color:#667eea}
        .container{max-width:1200px;margin:0 auto;padding:20px}
        .header{text-align:center;margin-bottom:30px}
        .logo{display:flex;align-items:center;justify-content:center;margin-bottom:20px;background:rgba(255,255,255,1);padding:20px 40px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.1);backdrop-filter:blur(10px);max-width:fit-content;margin:0 auto 20px auto}
        .logo img{max-width:300px;height:auto;width:300px;height:79px}
        .progress-container{margin-bottom:40px}
        .progress-bar{width:100%;height:8px;background-color:rgba(255,255,255,0.3);border-radius:4px;overflow:hidden;margin-bottom:15px}
        .progress-fill{height:100%;background:linear-gradient(90deg,#00d4ff,#006eff);border-radius:4px;width:25%;transition:width 0.5s ease}
        .main-content{display:flex;justify-content:center}
        .step-content{display:none;width:100%;max-width:600px}
        .step-content.active{display:block}
        .card{background:rgba(255,255,255,0.95);border-radius:20px;padding:40px;box-shadow:0 20px 60px rgba(0,0,0,0.3);backdrop-filter:blur(10px);text-align:center;contain:layout style paint}
        .btn{background:linear-gradient(45deg,#00d4ff,#006eff);color:white;border:none;padding:15px 30px;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all 0.3s ease;text-decoration:none;display:inline-block}
        .btn:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(0,110,255,0.3)}
        input,select{width:100%;padding:15px;border:2px solid #e0e0e0;border-radius:10px;font-size:16px;margin-bottom:15px;transition:border-color 0.3s ease}
        input:focus,select:focus{outline:none;border-color:#006eff}
        .gender-options{display:flex;gap:15px;justify-content:center;margin:20px 0}
        .gender-btn{flex:1;padding:20px;border:2px solid #e0e0e0;border-radius:15px;background:white;cursor:pointer;transition:all 0.3s ease;text-align:center}
        .gender-btn.selected{border-color:#006eff;background:linear-gradient(45deg,#00d4ff,#006eff);color:white}
    </style>
    
    <!-- Preload crítico com fallback -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="this.onerror=null;document.body.style.fontFamily='Arial,sans-serif'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"></noscript>
    
    <!-- CSS não-crítico carregado async com fallback -->
    <link rel="preload" href="assets/css/styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'" onerror="console.warn('CSS externo falhou ao carregar, usando estilos inline')">
    <noscript><link rel="stylesheet" href="assets/css/styles.css"></noscript>
    
    <!-- Preload de recursos críticos -->
    <link rel="preload" href="assets/images/Angel-Oasis-logo-300x79.webp" as="image">
    <link rel="preload" href="assets/images/background-image.webp" as="image">
    <link rel="preload" href="assets/js/script.js" as="script">
    <link rel="preload" href="assets/js/config.js" as="script">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Service Worker Registration -->
    <script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js')
                .then(function(registration) {
                    console.log('ServiceWorker registration successful');
                }, function(err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
        });
    }
    </script>
    
    <!-- Meta Pixel Code - Otimizado -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '891530102691135');
    fbq('track', 'PageView');
    </script>

    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=891530102691135&ev=PageView&noscript=1"
    /></noscript>

    <!-- Propagação de Parâmetros -->
    <script>
        window.onload = function() {
            const currentParams = new URLSearchParams(window.location.search);
            
            // Função que mescla sem duplicar
            function mergeParams(href) {
                const url = new URL(href, window.location.origin);
                currentParams.forEach((value, key) => {
                    if (!url.searchParams.has(key)) {
                        url.searchParams.set(key, value);
                    }
                });
                return url.toString();
            }

            // Links
            if ([...currentParams].length) {
                document.querySelectorAll('a[href]').forEach(link => {
                    const href = link.href;
                    if (href.startsWith('mailto:') || href.startsWith('#')) return;
                    link.href = mergeParams(href);
                });

                // Formulários
                document.querySelectorAll('form[action]').forEach(form => {
                    const action = form.action;
                    if (action.startsWith('mailto:') || action.startsWith('#')) return;
                    form.action = mergeParams(action);
                });
            }

            // Função global para redirecionar com parâmetros
            window.redirectWithParams = function(baseUrl) {
                const url = new URL(baseUrl);
                
                // Adicionar dados do usuário coletados
                if (userData && userData.firstName) {
                    url.searchParams.set('name', userData.firstName);
                }
                if (userData && userData.email) {
                    url.searchParams.set('email', userData.email);
                }
                if (userData && userData.gender) {
                    url.searchParams.set('gender', userData.gender);
                }
                if (userData && userData.angel && userData.angel.name) {
                    url.searchParams.set('angel', userData.angel.name);
                }
                
                // Adicionar parâmetros originais da URL
                currentParams.forEach((value, key) => {
                    if (!url.searchParams.has(key)) {
                        url.searchParams.set(key, value);
                    }
                });
                
                window.location.href = url.toString();
            };

            // Configurar botão do carrinho quando disponível
            setTimeout(() => {
                const addToCartBtn = document.getElementById('addToCartBtn');
                if (addToCartBtn) {
                    addToCartBtn.addEventListener('click', function() {
                        // Substitua pela sua URL de checkout real
                        redirectWithParams('https://example.com/checkout');
                    });
                }
            }, 1000);
        };
    </script>

</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="assets/images/Angel-Oasis-logo-300x79.webp" alt="Angel Oasis" width="300" height="79">
            </div>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-steps">
                <span class="step active" data-step="1">1</span>
                <span class="step" data-step="2">2</span>
                <span class="step" data-step="3">3</span>
                <span class="step" data-step="4">4</span>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Step 1: Name -->
            <div class="step-content active" id="step1">
                <div class="card">
                    <h2>El Día Que Naciste NO Fue Un Accidente. Un Ángel de la Guarda Fue Asignado Para Cuidarte...</h2>
                    <p>Ingresa Tus Detalles Abajo Para Descubrir el Nombre de Tu Ángel de la Guarda y El Mensaje Especial Que Te Espera...</p>
                    
                    <div class="form-section">
                        <h3>Paso 1: ¿Cuál es tu nombre?</h3>
                        <div class="input-group">
                            <label for="firstName">Ingresa Tu Nombre*</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <button class="continue-btn" onclick="nextStep()">Continuar →</button>
                    </div>
                </div>
            </div>

            <!-- Step 2: Gender -->
            <div class="step-content" id="step2">
                <div class="card">
                    <h2>El Día Que Naciste NO Fue Un Accidente. Un Ángel de la Guarda Fue Asignado Para Cuidarte...</h2>
                    <p>Ingresa Tus Detalles Abajo Para Descubrir el Nombre de Tu Ángel de la Guarda y El Mensaje Especial Que Te Espera...</p>
                    
                    <div class="form-section">
                        <h3>Paso 2: ¿Eres mujer u hombre?</h3>
                        <div class="gender-options">
                            <label class="gender-option">
                                <input type="radio" name="gender" value="male">
                                <span class="gender-btn">Hombre</span>
                            </label>
                            <label class="gender-option">
                                <input type="radio" name="gender" value="female">
                                <span class="gender-btn">Mujer</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Birth Date -->
            <div class="step-content" id="step3">
                <div class="card">
                    <h2>El Día Que Naciste NO Fue Un Accidente. Un Ángel de la Guarda Fue Asignado Para Cuidarte...</h2>
                    <p>Ingresa Tus Detalles Abajo Para Descubrir el Nombre de Tu Ángel de la Guarda y El Mensaje Especial Que Te Espera...</p>
                    
                    <div class="form-section">
                        <h3>Paso 3: ¿Cuándo naciste?</h3>
                        <div class="date-inputs">
                            <div class="input-group">
                                <label>Mes ⬇</label>
                                <select id="month" name="month">
                                    <option value="">Selecciona Mes</option>
                                    <option value="1">Enero</option>
                                    <option value="2">Febrero</option>
                                    <option value="3">Marzo</option>
                                    <option value="4">Abril</option>
                                    <option value="5">Mayo</option>
                                    <option value="6">Junio</option>
                                    <option value="7">Julio</option>
                                    <option value="8">Agosto</option>
                                    <option value="9">Septiembre</option>
                                    <option value="10">Octubre</option>
                                    <option value="11">Noviembre</option>
                                    <option value="12">Diciembre</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Día ⬇</label>
                                <select id="day" name="day">
                                    <option value="">Selecciona Día</option>
                                    <!-- Days will be populated by JavaScript -->
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Año ⬇</label>
                                <select id="year" name="year">
                                    <option value="">Selecciona Año</option>
                                    <!-- Years will be populated by JavaScript -->
                                </select>
                            </div>
                        </div>
                        <button class="continue-btn" onclick="nextStep()">Continuar →</button>
                    </div>
                </div>
            </div>

            <!-- Step 4: Email -->
            <div class="step-content" id="step4">
                <div class="card">
                    <h2>El Día Que Naciste NO Fue Un Accidente. Un Ángel de la Guarda Fue Asignado Para Cuidarte...</h2>
                    <p>Ingresa Tus Detalles Abajo Para Descubrir el Nombre de Tu Ángel de la Guarda y El Mensaje Especial Que Te Espera...</p>
                    
                    <div class="form-section">
                        <h3>Paso 4: ¿Dónde debería enviarse tu lectura gratuita?</h3>
                        <div class="input-group">
                            <label for="email">Ingresa Tu Email</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <button class="continue-btn" onclick="generateReading()">¡Sí, Muestra Mi Resultado! →</button>
                    </div>
                </div>
            </div>

            <!-- Loading Screen -->
            <div class="step-content" id="loading">
                <div class="card">
                    <div class="loading-content">
                        <div class="checkmark">✓</div>
                        <h3>El Día Que Naciste NO Fue Un Accidente. Un Ángel de la Guarda Fue Asignado Para Cuidarte...</h3>
                        <p>Ingresa Tus Detalles Abajo Para Descubrir el Nombre de Tu Ángel de la Guarda y El Mensaje Especial Que Te Espera...</p>
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div class="step-content" id="results">
                <div class="card">
                    <h2><span id="userName"></span>, El Arcángel <span id="angelNameTitle">Sariel</span> Tiene Las Llaves De Tu Gran Destino...</h2>
                    <p>Este Reporte Personalizado del Ángel de la Guarda Ha Sido Preparado Para:</p>
                    
                    <div class="result-content">
                        <div class="angel-info">
                            <h3>Querido/a <span id="userNameResult"></span>,</h3>
                            <p>El día que naciste tenías un Ángel muy especial cuidándote...</p>
                            <p>Tu Ángel de la Guarda se llama <span id="angelNameText">Sariel</span> y <span id="angelNameText2">Sariel</span> tiene mucho que decirte que se revelará en un momento.</p>
                            
                            <div class="angel-details">
                                <h4>Tu Arcángel de la Guarda es <span id="angelNameDetails">Sariel</span></h4>
                                <img src="assets/images/uriel.jpg" alt="Arcángel Sariel" class="angel-image" width="150" height="150" loading="lazy" id="angelImage">
                                <p id="angelDescription">El nombre de Sariel se traduce como "Mandato de Dios". Sariel proporciona guía divina y dirección, ayudándote a seguir tu camino espiritual con confianza.</p>
                                <p>Todo lo que necesitas es... el "Decodificador Divino"...</p>
                            </div>
                            
                            <button class="discover-btn" onclick="showOffer(); if(typeof fbq !== 'undefined') fbq('track', 'VideoView');" id="discoverBtn">Haz Clic Aquí Para Descubrir Cómo Conectarte Con El Arcángel Sariel</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Offer Screen -->
            <div class="step-content" id="offer">
                <div class="card">
                    <h2><span id="userNameOffer"></span>, El Arcángel <span id="angelNameOffer">Sariel</span> Tiene Las Llaves De Tu Gran Destino...</h2>
                    <p>Este Reporte Personalizado del Ángel de la Guarda Ha Sido Preparado Para:</p>
                    
                    <div class="offer-content">
                        
                        <div class="offer-details">
                            <h3>Querido/a <span id="userNameDear"></span>, Estás A Punto De Descubrir El Secreto Definitivo Para Conectarte Con El Arcángel <span id="angelNameOfferDetails">Sariel</span>... (Comenzando En Las Próximas 24 Horas...)</h3>
                            
                            <div class="video-placeholder">
                                <vturb-smartplayer id="vid-68bcdb7af27eb4c9e8d2c0b8" style="display: block; margin: 0 auto; width: 100%; "></vturb-smartplayer> <script type="text/javascript"> var s=document.createElement("script"); s.src="https://scripts.converteai.net/28d41dbd-cd23-4eac-a930-66e1aca584eb/players/68bcdb7af27eb4c9e8d2c0b8/v4/player.js", s.async=!0,document.head.appendChild(s); </script>
                            </div>
                            
                            <div class="offer-box esconder">
                                <h4>El Reporte Premium del Ángel de la Guarda</h4>
                                <p>"La Clave Para Desbloquear Toda Tu Grandeza Espiritual..."</p>
                                <div class="price">
                                    <span class="old-price">$179.95</span>
                                    <span class="new-price">SOLO HOY $7</span>
                                </div>
                                <button id="addToCartBtn" class="add-to-cart-btn">Agregar Al Carrito 🛒</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <style>

        .esconder {
            display: none;
        }

    </style>

    <script>
        var delaySeconds = 1049;
        var player = document.querySelector("vturb-smartplayer");
        player.addEventListener("player:ready", function() {
            player.displayHiddenElements(delaySeconds, [".esconder"], {
            persist: true
            });
        });
    </script>

    <!-- Scripts carregados com defer para não bloquear -->
    <script defer src="assets/js/config.js"></script>
    <script defer src="assets/js/script.js"></script>
</body>
</html>
